
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>9. level-flight-calculations &#8212; Predicting Indoor Flight Times With Python</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://rblack42.github.io/nffs-2022-symposium-live/content/09-level-flight-calculations.html" />
    <link rel="shortcut icon" href="../_static/lpp.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. A-6 Propeller Analysis" href="10-a6-propeller-analysis.html" />
    <link rel="prev" title="8. Generating Airfoils for XFoil" href="08-generating-airfoils-for-xfoil.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/lpp.gif" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Predicting Indoor Flight Times With Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="00-index.html">
   Predicting Indoor Model Flight Time Using Python
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01-overview.html">
   1. Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02-atmospheric-data.html">
   2. Atmospheric Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03-hacklingers-equation.html">
   3. Hacklinger’s Equation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04-tenny-data-analysis.html">
   4. Tenny’s Flight Path Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05-circular-arc-data.html">
   5. Circular Arc Airfoil Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06-data-smoothing.html">
   6. Data Smoothing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07-simplified-indoor-design.html">
   7. Simplified Indoor Design
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08-generating-airfoils-for-xfoil.html">
   8. Generating Airfoils for XFoil
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   9. level-flight-calculations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10-a6-propeller-analysis.html">
   10. A-6 Propeller Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11-rubber-motors.html">
   12. Rubber Motors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/10-minute-guide-to-python.html">
   13. 10 Minute Guide to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/project-setup.html">
   14. Installing This Project on Your Computer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/accessing-the-online-study.html">
   15. Accessing The Online Study
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/brief-guide-to-using-jupyter.html">
   16. Brief Guide to Using Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/running-xfoil-with-python.html">
   17. Running XFOIL with Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bibliography.html">
   18. Bibliography
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="biography.html">
   19. Biography
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/content/09-level-flight-calculations.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/rblack42/nffs-2022-symposium-live"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/rblack42/nffs-2022-symposium-live/issues/new?title=Issue%20on%20page%20%2Fcontent/09-level-flight-calculations.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.ord/v2/gh/rblack42/nffs-2022-symposium-live/master?urlpath=tree/docs/content/09-level-flight-calculations.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#erbachs-moment-calculations">
   9.1. Erbach’s Moment Calculations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-airfoil-data">
   9.2. Loading Airfoil Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-model-dimensions">
   9.3. Loading Model Dimensions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-model-moment-arms">
   9.4. Loading Model Moment Arms
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#induced-drag">
   9.5. Induced Drag
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#including-downwash-effects">
   9.6. Including Downwash Effects
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>level-flight-calculations</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#erbachs-moment-calculations">
   9.1. Erbach’s Moment Calculations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-airfoil-data">
   9.2. Loading Airfoil Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-model-dimensions">
   9.3. Loading Model Dimensions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-model-moment-arms">
   9.4. Loading Model Moment Arms
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#induced-drag">
   9.5. Induced Drag
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#including-downwash-effects">
   9.6. Including Downwash Effects
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="level-flight-calculations">
<h1><span class="section-number">9. </span>level-flight-calculations<a class="headerlink" href="#level-flight-calculations" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">projdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;../..&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">projdir</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">projdir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We will use Erbach’s scheme to determine the level flight velocity. I will add code to determine the best angle for level flight and avoid Erbach’s need to deal with “terrifying yards of tabulated data” to find this flight setting!</p>
<div class="section" id="erbachs-moment-calculations">
<h2><span class="section-number">9.1. </span>Erbach’s Moment Calculations<a class="headerlink" href="#erbachs-moment-calculations" title="Permalink to this headline">¶</a></h2>
<p>Erbach set the wing and stab incidence, then conducted an angle of attack survey to generate the needed data. At each angle of attack, his code calculates the lift and drag forces for the wing and stab. He then calculates the resulting pitching moment using these forces. He plotted the pitching moment curve looking for the zero point, which is where the model would fly level.</p>
<p>Since we are doing these calculations numerically anyway, it is easy to set up a coordinate transformation system that calculates moments in a coordinate system centered on the center of gravity, and rotated so the body is located at the desired angle of attack. I packaged these transformations in a simple Python routine named <strong>transform</strong>. It takes the center of gravity coordinates and an angle of attack, together with a point of interest as parameters. It returns those coordinates in the CG-centered system.</p>
<p>The translation will move the model system from the nose to the center of gravity, then we will rotate the system  by a negative <span class="math notranslate nohighlight">\(\alpha\)</span> which will be nose up. The code for this transformation is fairly simple:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="n">xcg</span><span class="p">,</span><span class="n">ycg</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span><span class="p">):</span>
    <span class="n">rad</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span>
    <span class="n">xt</span> <span class="o">=</span> <span class="n">xp</span> <span class="o">-</span> <span class="n">xcg</span>
    <span class="n">yt</span> <span class="o">=</span> <span class="n">yp</span> <span class="o">-</span> <span class="n">ycg</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">xt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span> <span class="o">+</span> <span class="n">yt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="n">xt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span> <span class="o">+</span> <span class="n">yt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mmtime</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># model coordinates (referenced to lower body nose)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">mmtime.utils</span> <span class="kn">import</span> <span class="n">show_curve</span><span class="p">,</span> <span class="n">show_curve2</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="loading-airfoil-data">
<h2><span class="section-number">9.2. </span>Loading Airfoil Data<a class="headerlink" href="#loading-airfoil-data" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mmtime.AirfoilMgr</span> <span class="kn">import</span> <span class="n">AirfoilMgr</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_dir</span> <span class="o">=</span> <span class="s1">&#39;../../mmtime/data/airfoils&#39;</span>
<span class="n">am</span> <span class="o">=</span> <span class="n">AirfoilMgr</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span>
<span class="n">am</span><span class="o">.</span><span class="n">showAirfoils</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;mcbride-b7&#39;, &#39;arc0401&#39;, &#39;arc5&#39;, &#39;simplex0401&#39;, &#39;arc3&#39;, &#39;xfoil&#39;, &#39;simplex0301&#39;, &#39;arc0301&#39;, &#39;simple&#39;, &#39;simplex&#39;, &#39;turns2d&#39;, &#39;simplex0201&#39;, &#39;arc0201&#39;, &#39;simplex0601&#39;, &#39;flat0001&#39;, &#39;simplex0101&#39;, &#39;simplex0501&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">am</span><span class="o">.</span><span class="n">selectAirfoil</span><span class="p">(</span><span class="s1">&#39;simplex0401&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Selected: simplex0401
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">clw</span><span class="p">,</span> <span class="n">cdw</span><span class="p">,</span> <span class="n">cmw</span><span class="p">,</span> <span class="n">cpw</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">loadData</span><span class="p">(</span><span class="s1">&#39;re3k&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Loading simplex0401
	Loading CD_re3k.csv
	Loading CP_re3k.csv
	Loading CM_re3k.csv
	Loading CL_re3k.csv
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">am</span><span class="o">.</span><span class="n">selectAirfoil</span><span class="p">(</span><span class="s1">&#39;simplex0201&#39;</span><span class="p">)</span>
<span class="bp">cls</span><span class="p">,</span> <span class="n">cds</span><span class="p">,</span> <span class="n">cms</span><span class="p">,</span> <span class="n">cps</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">loadData</span><span class="p">(</span><span class="s1">&#39;re3k&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Selected: simplex0201
Loading simplex0201
	Loading CD_re3k.csv
	Loading CP_re3k.csv
	Loading CM_re3k.csv
	Loading CL_re3k.csv
</pre></div>
</div>
</div>
</div>
<p>We now have the coefficient curve fit functions available to run the calculations.</p>
<p>Before we continue, let’s look at the coefficient curves:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="n">clx1</span>  <span class="o">=</span> <span class="n">clw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">clx2</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">show_curve2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">clx1</span><span class="p">,</span><span class="n">clx2</span><span class="p">,</span><span class="s2">&quot;wing&quot;</span><span class="p">,</span><span class="s2">&quot;stab&quot;</span><span class="p">,</span><span class="s2">&quot;Lift Coefficient&quot;</span><span class="p">,</span><span class="s2">&quot;Alpha&quot;</span><span class="p">,</span><span class="s2">&quot;$C_l$&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/09-level-flight-calculations_17_0.png" src="../_images/09-level-flight-calculations_17_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdx1</span>  <span class="o">=</span> <span class="n">cdw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cdx2</span> <span class="o">=</span> <span class="n">cds</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">show_curve2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">cdx1</span><span class="p">,</span><span class="n">cdx2</span><span class="p">,</span><span class="s2">&quot;wing&quot;</span><span class="p">,</span><span class="s2">&quot;stab&quot;</span><span class="p">,</span><span class="s2">&quot;Drag Coefficient&quot;</span><span class="p">,</span><span class="s2">&quot;Alpha&quot;</span><span class="p">,</span><span class="s2">&quot;$C_d$&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/09-level-flight-calculations_18_0.png" src="../_images/09-level-flight-calculations_18_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cmx1</span>  <span class="o">=</span> <span class="n">cmw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cmx2</span> <span class="o">=</span> <span class="n">cms</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">show_curve2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">cmx1</span><span class="p">,</span><span class="n">cmx2</span><span class="p">,</span><span class="s2">&quot;wing&quot;</span><span class="p">,</span><span class="s2">&quot;stab&quot;</span><span class="p">,</span><span class="s2">&quot;Moment Coefficient&quot;</span><span class="p">,</span><span class="s2">&quot;Alpha&quot;</span><span class="p">,</span><span class="s2">&quot;$C_m$&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/09-level-flight-calculations_19_0.png" src="../_images/09-level-flight-calculations_19_0.png" />
</div>
</div>
</div>
<div class="section" id="loading-model-dimensions">
<h2><span class="section-number">9.3. </span>Loading Model Dimensions<a class="headerlink" href="#loading-model-dimensions" title="Permalink to this headline">¶</a></h2>
<p>All model data is stored in a data file for loading. Since this data is dimensional, we need to create a <strong>pint</strong> <em>UnitRegistry</em> here, and pass it to the data routine:</p>
</div>
<div class="section" id="loading-model-moment-arms">
<h2><span class="section-number">9.4. </span>Loading Model Moment Arms<a class="headerlink" href="#loading-model-moment-arms" title="Permalink to this headline">¶</a></h2>
<p>We need to define the moment arms for the wing and stab. All model dimension data is loaded from a model file that sets up basic dimensions and calculates a few other dimensions we will need:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pint</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">pint</span><span class="o">.</span><span class="n">UnitRegistry</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mmtime.data.models.wart</span> <span class="kn">import</span> <span class="n">data</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wart</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">Wart</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="n">mdata</span> <span class="o">=</span> <span class="n">wart</span><span class="o">.</span><span class="n">model_data</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xcg</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;cg&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ycg</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;cg&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">xwac</span> <span class="o">=</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">inch</span>
<span class="n">ywac</span> <span class="o">=</span> <span class="mi">7</span><span class="o">/</span><span class="mi">8</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">inch</span>
<span class="n">xsac</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="o">+</span><span class="mf">8.5</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">inch</span>
<span class="n">ysac</span> <span class="o">=</span> <span class="mf">0.125</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">inch</span>
<span class="n">wgt</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;flying_wgt&#39;</span><span class="p">]</span>
<span class="n">sw</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;wing&#39;</span><span class="p">][</span><span class="s1">&#39;projected_area&#39;</span><span class="p">]</span>
<span class="n">ss</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;stab&#39;</span><span class="p">][</span><span class="s1">&#39;projected_area&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we need to calculate the air density from the standard atmosphere model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mmtime.StdAtm</span> <span class="kn">import</span> <span class="n">Air</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">Air</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get_properties</span><span class="p">(</span><span class="mi">864</span><span class="p">)</span>
<span class="n">rho</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;rho&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">((</span><span class="n">rho</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;ounce/ft**3&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.192951469114702
</pre></div>
</div>
</div>
</div>
<p>The wart is constructed with the wing set at zero incidence and the stab at -2 degrees. We will run the angle of attack survey from -4 to 10 degrees for our example. <strong>numpy</strong> makes generating lists of values a snap! <strong>x</strong> has our angle of attack survey points.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># calculate stab angle of attack</span>
<span class="n">sa</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">2</span>

<span class="c1"># load coefficient arrays</span>
<span class="n">cl_w</span> <span class="o">=</span> <span class="n">clw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cd_w</span> <span class="o">=</span> <span class="n">cdw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cm_w</span> <span class="o">=</span> <span class="n">cmw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cl_s</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">sa</span><span class="p">)</span>
<span class="n">cd_s</span> <span class="o">=</span> <span class="n">cds</span><span class="p">(</span><span class="n">sa</span><span class="p">)</span>
<span class="n">cm_s</span> <span class="o">=</span> <span class="n">cms</span><span class="p">(</span><span class="n">sa</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we calculate the velocity required to maintain level flight for each of these survey settings. The lift required is equal to the model weight so we calculate the lift generated by the wing and stab at each setting. This calculation is done in steps to avoid taking the square root of a negative number. If the lift goes negative, we will get a negative velocity which makes no sense. We will filter those values out.</p>
<p>The definition of the lift coefficient is given by:</p>
<div class="amsmath math notranslate nohighlight" id="equation-bde9cf72-660d-4aa9-96f6-81cd45cb253e">
<span class="eqno">(9.1)<a class="headerlink" href="#equation-bde9cf72-660d-4aa9-96f6-81cd45cb253e" title="Permalink to this equation">¶</a></span>\[\begin{equation}
C_l = \frac{2wg}{\rho V^2 S}
\end{equation}\]</div>
<p>The predicted flight speed calculation is thus given by:</p>
<div class="amsmath math notranslate nohighlight" id="equation-7f1e5223-29fa-4b32-a2b2-24db57060613">
<span class="eqno">(9.2)<a class="headerlink" href="#equation-7f1e5223-29fa-4b32-a2b2-24db57060613" title="Permalink to this equation">¶</a></span>\[\begin{equation}
V = \sqrt{\frac{2 w g}{\rho C_l S}}
\end{equation}\]</div>
<p>We will need to introduce the acceleration due to gravity to make the units work.</p>
<p>Since our lift curve pases through zero, there will be a problem trying to generate the velocity curve from this equation. We will need to ignore the negative lift part of the curve for our calculations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">K1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">wgt</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">gravity</span><span class="o">/</span><span class="n">rho</span><span class="p">)</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
<span class="n">K1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">0.0338293961192986 meter<sup>4</sup>/second<sup>2</sup></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">TL</span> <span class="o">=</span> <span class="p">(</span><span class="n">cl_w</span> <span class="o">*</span> <span class="n">sw</span> <span class="o">+</span> <span class="n">cl_s</span> <span class="o">*</span> <span class="n">ss</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># start velocity calculation for this configuration</span>
<span class="n">VE2</span> <span class="o">=</span> <span class="n">K1</span><span class="o">/</span><span class="n">TL</span>
</pre></div>
</div>
</div>
</div>
<p>We need to filter this list by eliminating the negative (and zero lift) values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jj</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
    <span class="n">jj</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">if</span> <span class="n">VE2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">break</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">VE2</span><span class="p">[</span><span class="n">jj</span><span class="p">:]</span><span class="o">**</span><span class="mf">0.5</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">jj</span><span class="p">:]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_curve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="s2">&quot;Velocity&quot;</span><span class="p">,</span><span class="s2">&quot;Alpha&quot;</span><span class="p">,</span><span class="s2">&quot;velocity&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/rblack/_dev/indoor-research/live-2022/.direnv/python-3.10.8/lib/python3.10/site-packages/matplotlib/cbook/__init__.py:1298: UnitStrippedWarning: The unit of the quantity is stripped when downcasting to ndarray.
  return np.asarray(x, float)
</pre></div>
</div>
<img alt="../_images/09-level-flight-calculations_38_1.png" src="../_images/09-level-flight-calculations_38_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wla</span><span class="p">,</span> <span class="n">wda</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">xcg</span><span class="p">,</span> <span class="n">ycg</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">xwac</span><span class="p">,</span> <span class="n">ywac</span><span class="p">)</span>
<span class="n">sla</span><span class="p">,</span> <span class="n">sda</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">xcg</span><span class="p">,</span> <span class="n">ycg</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">xsac</span><span class="p">,</span> <span class="n">ysac</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sda</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.0802082979528144 -0.0005040902665827286 -0.08121644164843085<br> -0.16192285795309083 -0.24261744137464236 -0.3232942949718804<br> -0.40394752309924786 -0.4845712318376716 -0.5651595294252768<br> -0.6457065266879383 -0.7262063374696474 -0.8066530790626547<br> -0.8870408726373639 -0.9673638436719396 -1.0476161223816014<br> -1.1277918441475725 -1.2078851499456498 -1.2878901867743657<br> -1.367801108082709 -1.4476120741973761 -1.5273172527495162<br> -1.606910819100948 -1.6863869567698067 -1.765739857855597<br> -1.8449637234636171 -1.9240527641287313 -2.0030012002384416<br> -2.0818032624552507 -2.1604531921382684 -2.238945241764037<br> -2.317273675346545 -2.3954327688563968 -2.4734168106391112<br> -2.551220101832512 -2.6288369567831844 -2.706261703461969<br> -2.783488683878458 -2.8605122544944646 -2.937326786636441<br> -3.013926666906799 -3.090306297594131 -3.1664600970822705<br> -3.24238250025818]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>inch</td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># calculate stab angle of attack</span>
<span class="n">sa</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">2</span>

<span class="c1"># recalculate coefficient arrays</span>
<span class="n">cl_w</span> <span class="o">=</span> <span class="n">clw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cd_w</span> <span class="o">=</span> <span class="n">cdw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cm_w</span> <span class="o">=</span> <span class="n">cmw</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">cl_s</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">sa</span><span class="p">)</span>
<span class="n">cd_s</span> <span class="o">=</span> <span class="n">cds</span><span class="p">(</span><span class="n">sa</span><span class="p">)</span>
<span class="n">cm_s</span> <span class="o">=</span> <span class="n">cms</span><span class="p">(</span><span class="n">sa</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">v</span> <span class="o">**</span> <span class="mi">2</span>
<span class="n">lift_wing</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="n">cl_w</span> <span class="o">*</span> <span class="n">sw</span>
<span class="n">lift_wing</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.28886380817992513 0.032838928553067095 0.023919590929498403<br> 0.020655584238927868 0.01886013416003337 0.01775018552316042<br> 0.01709156816792002 0.01664788144705344 0.016284349146941723<br> 0.015974604646950136 0.015708764234238514 0.015471351643528005<br> 0.01525181993964836 0.015053208296004107 0.014884214318771878<br> 0.014751466230034633 0.014646006972395207 0.014600459700660345<br> 0.014609348490293474 0.014591607928622104 0.01455935397148593<br> 0.014550347538624643 0.014541697167716663 0.014526279848689528<br> 0.014503661823977426 0.014479669217034918 0.014456649561695508<br> 0.014434179031438302 0.014412292162178523 0.014390939824343394<br> 0.014370125583591768 0.014349826211286764 0.014330088376445787<br> 0.014310904486650611 0.014292243534062934 0.01427413741946022<br> 0.01425658838675909 0.014239552302147837 0.014223002726703779<br> 0.01420690239140255 0.014191151589163618 0.014175665190059843<br> 0.014160355288021823]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span>
<span class="n">lift_wing</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="n">cl_w</span> <span class="o">*</span> <span class="n">sw</span>
<span class="n">drag_wing</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="n">cd_w</span> <span class="o">*</span> <span class="n">sw</span>
<span class="n">moment_wing</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="n">cm_w</span> <span class="o">*</span> <span class="n">sw</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">inch</span>

<span class="n">lift_stab</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="n">cl_s</span> <span class="o">*</span> <span class="n">ss</span>
<span class="n">drag_stab</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="n">cd_s</span> <span class="o">*</span> <span class="n">ss</span>
<span class="n">moment_stab</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="n">cm_s</span> <span class="o">*</span> <span class="n">ss</span> <span class="o">*</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">inch</span>

<span class="n">wing_drag_moment</span> <span class="o">=</span> <span class="n">wda</span> <span class="o">*</span> <span class="n">drag_wing</span>
<span class="n">wing_lift_moment</span> <span class="o">=</span> <span class="n">wla</span> <span class="o">*</span> <span class="n">lift_wing</span>
<span class="n">stab_lift_moment</span> <span class="o">=</span> <span class="n">sla</span> <span class="o">*</span> <span class="n">lift_stab</span>
<span class="n">stab_drag_moment</span> <span class="o">=</span> <span class="n">sda</span> <span class="o">*</span> <span class="n">drag_stab</span>
<span class="n">stab_drag_moment</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.00016719983616400393 -6.59660844751206e-08 -5.41343229250391e-06<br> -7.444940402714756e-06 -8.808695361426735e-06 -9.921749717078961e-06<br> -1.0893047114533151e-05 -1.1736566080819207e-05 -1.2475893845884287e-05<br> -1.316641004108273e-05 -1.3840540264186522e-05 -1.455103699849026e-05<br> -1.5145539730732594e-05 -1.5901343613099416e-05 -1.7144009051679247e-05<br> -1.888294973433651e-05 -2.1360033080650715e-05 -2.3792657823922747e-05<br> -2.5880606178258965e-05 -2.9068836365449353e-05 -3.329665758412661e-05<br> -3.7642566661326806e-05 -4.202375394501972e-05 -4.605273927137916e-05<br> -4.989352553805482e-05 -5.391174293377063e-05 -5.786601692104377e-05<br> -6.181013664266576e-05 -6.573276757588018e-05 -6.964246059561359e-05<br> -7.35428131161575e-05 -7.743872378994628e-05 -8.133410479839542e-05<br> -8.523398367583533e-05 -8.91422458726834e-05 -9.306129264117786e-05<br> -9.699406710906094e-05 -0.0001009434372258585 -0.00010491156566062657<br> -0.00010890154229494211 -0.00011291692113731282 -0.00011696058121143185<br> -0.00012103613022159822]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter<sup>2</sup>/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_moment</span> <span class="o">=</span> <span class="o">-</span> <span class="n">wing_lift_moment</span> \
    <span class="o">+</span> <span class="n">wing_drag_moment</span> \
    <span class="o">-</span> <span class="n">stab_lift_moment</span> \
    <span class="o">-</span> <span class="n">stab_drag_moment</span> \
    <span class="o">+</span> <span class="n">moment_wing</span> <span class="o">+</span> <span class="n">moment_stab</span>
<span class="n">total_moment</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.07787789167877729 0.004745507637731428 0.002201734552573635<br> 0.0012744812434293336 0.0007670640332447002 0.0004557297741951084<br> 0.0002740914899138788 0.00015248206402342424 5.16530974127099e-05<br> -3.502694991069629e-05 -0.00010980174848724986 -0.000176985908294777<br> -0.00023949183520907328 -0.0002965000455766364 -0.0003453802646952042<br> -0.00038394530216683676 -0.0004146802557356716 -0.0004276590939563015<br> -0.0004244995528434933 -0.0004290570965517008 -0.00043742729155674316<br> -0.0004384049057423197 -0.0004387717054003565 -0.000440785544859526<br> -0.00044465008316523766 -0.0004486225663990328 -0.00045212923106552143<br> -0.0004553156969198572 -0.00045820073589379607 -0.0004608138777159603<br> -0.0004631663025231083 -0.0004652728567779545 -0.0004671248227094729<br> -0.00046872673628180135 -0.0004700884973169861 -0.0004712021424642945<br> -0.00047206844749963774 -0.0004726972556266547 -0.00047309600151880385<br> -0.00047327355542859333 -0.0004732547793813699 -0.0004730605556406376<br> -0.0004727116130864305]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter<sup>2</sup>/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">total_moment</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/09-level-flight-calculations_45_0.png" src="../_images/09-level-flight-calculations_45_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mmtime.utils</span> <span class="kn">import</span> <span class="n">fit_curve</span>
<span class="n">m_a</span> <span class="o">=</span> <span class="n">fit_curve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">total_moment</span><span class="p">)</span>
<span class="n">zero_angle</span>  <span class="o">=</span> <span class="n">m_a</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">zero_angle</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/rblack/_dev/indoor-research/live-2022/.direnv/python-3.10.8/lib/python3.10/site-packages/scipy/interpolate/_cubic.py:23: UnitStrippedWarning: The unit of the quantity is stripped when downcasting to ndarray.
  x, y = map(np.asarray, (x, y))
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([3.63107448])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span> <span class="o">=</span> <span class="n">zero_angle</span>
<span class="n">alpha</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">degrees</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[3.631074482280199]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>degree</td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">VE</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">wgt</span> <span class="o">/</span><span class="p">(</span><span class="n">rho</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">gravity</span><span class="o">*</span><span class="p">(</span><span class="n">clw</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">sw</span> <span class="o">+</span> <span class="bp">cls</span><span class="p">(</span><span class="n">alpha</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">ss</span><span class="p">))</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">VE</span><span class="p">)</span>
<span class="n">v</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;mph&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[3.589166603945602]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>mile_per_hour</td></tr></tbody></table></div></div>
</div>
<p>Now, let’s calculate the Reynolds Number for this velocity:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mean_chord</span> <span class="o">=</span> <span class="mf">1.85</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">inch</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">Air</span><span class="p">(</span><span class="n">u</span><span class="p">)</span><span class="o">.</span><span class="n">get_properties</span><span class="p">(</span><span class="mi">864</span><span class="p">)[</span><span class="s1">&#39;mu&#39;</span><span class="p">]</span>
<span class="n">density</span> <span class="o">=</span> <span class="n">Air</span><span class="p">(</span><span class="n">u</span><span class="p">)</span><span class="o">.</span><span class="n">get_properties</span><span class="p">(</span><span class="mi">864</span><span class="p">)[</span><span class="s1">&#39;rho&#39;</span><span class="p">]</span>
<span class="n">RE</span> <span class="o">=</span> <span class="n">density</span> <span class="o">*</span> <span class="n">v</span> <span class="o">*</span> <span class="n">mean_chord</span> <span class="o">/</span> <span class="n">mu</span>
<span class="n">RE</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[5055.667485541922]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>dimensionless</td></tr></tbody></table></div></div>
</div>
<p>These calculations are for our 2D model. McLean included some 3D effects by adding in induced drag.</p>
</div>
<div class="section" id="induced-drag">
<h2><span class="section-number">9.5. </span>Induced Drag<a class="headerlink" href="#induced-drag" title="Permalink to this headline">¶</a></h2>
<p>When air flows over a lifting surface several interesting things happen. One is the formation of two vortices that appear behind the wing tips. Although it is common to talk about the formation of these vortices as a result of the pressure difference between the upper and lower surfaces, their formation is more complicated than that. (For a good discussion of this, see Doug McLean’s 2005 article on wing-tip design <span id="id1">[<a class="reference internal" href="bibliography.html#id25">McL</a>]</span>.</p>
<p>A side effect of those vortices is a downward deflection of the airstream behind the wing that influences the effective angle of attack of the stabilizer. This downward flow is called <em>Downwash</em>.</p>
<p>In initial designs, the downwash angle can be estimated using this equation:</p>
<div class="amsmath math notranslate nohighlight" id="equation-607a17b9-d8ed-4a20-9a79-3660de9d430f">
<span class="eqno">(9.3)<a class="headerlink" href="#equation-607a17b9-d8ed-4a20-9a79-3660de9d430f" title="Permalink to this equation">¶</a></span>\[\begin{equation}
\epsilon = \frac{2C_{lw}}{\pi{AR}_w}
\end{equation}\]</div>
<p>The induced drag due to the wing is given by:</p>
<div class="amsmath math notranslate nohighlight" id="equation-5ea1a6b8-7bcb-421e-b27e-77f6ac0d8926">
<span class="eqno">(9.4)<a class="headerlink" href="#equation-5ea1a6b8-7bcb-421e-b27e-77f6ac0d8926" title="Permalink to this equation">¶</a></span>\[\begin{equation}
C_{diw} = \frac{1}{\pi {AR}_w}
\end{equation}\]</div>
<p>And the induced drag due to the stab is given by:</p>
<div class="amsmath math notranslate nohighlight" id="equation-8885d45c-e030-4ecf-9953-9bbe8fc98945">
<span class="eqno">(9.5)<a class="headerlink" href="#equation-8885d45c-e030-4ecf-9953-9bbe8fc98945" title="Permalink to this equation">¶</a></span>\[\begin{equation}
C_{dis} = \frac{C_{ls}^2}{\pi {AR}_s} + 2 C_{ls}C_{diw}
\end{equation}\]</div>
<p>Where:</p>
<div class="amsmath math notranslate nohighlight" id="equation-ae6a6e3b-e842-498a-a209-0510e1b900b9">
<span class="eqno">(9.6)<a class="headerlink" href="#equation-ae6a6e3b-e842-498a-a209-0510e1b900b9" title="Permalink to this equation">¶</a></span>\[\begin{equation}
{AR}_{wing} = \frac{b_w^2}{S_f}
\end{equation}\]</div>
<div class="amsmath math notranslate nohighlight" id="equation-9f23c6af-c10f-4d52-8cbb-7e68020904f9">
<span class="eqno">(9.7)<a class="headerlink" href="#equation-9f23c6af-c10f-4d52-8cbb-7e68020904f9" title="Permalink to this equation">¶</a></span>\[\begin{equation}
{AR}_{stab} = \frac{b_s^2}{S_s}
\end{equation}\]</div>
<p>Here:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(b_w\)</span> is the wing span</p></li>
<li><p><span class="math notranslate nohighlight">\(b_s\)</span> is the stab span</p></li>
<li><p><span class="math notranslate nohighlight">\(S_w\)</span> is the wing projected area</p></li>
<li><p><span class="math notranslate nohighlight">\(S_s\)</span> is the stab projected span</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b_w</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;wing&#39;</span><span class="p">][</span><span class="s1">&#39;projected_span&#39;</span><span class="p">]</span>
<span class="n">a_w</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;wing&#39;</span><span class="p">][</span><span class="s1">&#39;projected_area&#39;</span><span class="p">]</span>
<span class="n">b_s</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;stab&#39;</span><span class="p">][</span><span class="s1">&#39;projected_span&#39;</span><span class="p">]</span>
<span class="n">a_s</span> <span class="o">=</span> <span class="n">mdata</span><span class="p">[</span><span class="s1">&#39;stab&#39;</span><span class="p">][</span><span class="s1">&#39;projected_area&#39;</span><span class="p">]</span>

<span class="n">aspect_ratio_wing</span> <span class="o">=</span> <span class="n">b_w</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">a_w</span>
<span class="n">aspect_ratio_stab</span> <span class="o">=</span> <span class="n">b_s</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">a_s</span>
<span class="nb">print</span><span class="p">(</span><span class="n">aspect_ratio_wing</span><span class="p">,</span> <span class="n">aspect_ratio_stab</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7.8871660432942985 dimensionless 7.959312965493482 dimensionless
</pre></div>
</div>
</div>
</div>
<p>The downwash angle seen by the stabilizer is calculated next:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eps</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">cl_w</span><span class="o">/</span><span class="p">(</span><span class="n">aspect_ratio_wing</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">eps</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.4708216585459101 0.8304696052429581 1.1695106173031853<br> 1.4553342819774586 1.6834954376479758 1.8808780019931224<br> 2.068268774699325 2.2506680704842124 2.4278712780722485<br> 2.5986703392281028 2.7613600694682403 2.913842734729647<br> 3.0536541866582545 3.178231915761888 3.285499049651132 3.3745782309849894<br> 3.44654120200397 3.504349460447585 3.5521763826485406 3.594783557446779<br> 3.6368156160574294 3.6820547911313795 3.7328531710943715<br> 3.790043212353827 3.8533304795156536 3.9218827247773915<br> 3.9947545005468705 4.071063631996272 4.150063147940985 4.231126023357798<br> 4.313739495070567 4.397494824071387 4.482083903429996 4.567214430142499<br> 4.6526677322316985 4.738275886272328 4.823869350978623 4.909337834587565<br> 4.99451780172789 5.079251393770221 5.163379364159408 5.246741480473677<br> 5.329177510291253]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>dimensionless</td></tr></tbody></table></div></div>
</div>
<p>Those angle are significant! Our data will be suspect as the curve fit routines extrapolate to get stab values!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="n">C_lr</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">alpha</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">C_dif</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">aspect_ratio_wing</span><span class="p">)</span>
<span class="n">C_dir</span> <span class="o">=</span> <span class="n">C_lr</span> <span class="o">**</span> <span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span> <span class="n">aspect_ratio_stab</span><span class="p">)</span> <span class="o">+</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">C_lr</span><span class="o">*</span><span class="n">C_dif</span>
</pre></div>
</div>
</div>
</div>
<p>The total induce drag is given by:</p>
<div class="amsmath math notranslate nohighlight" id="equation-4f162366-aa9f-4eab-adf8-f9c551c5966f">
<span class="eqno">(9.8)<a class="headerlink" href="#equation-4f162366-aa9f-4eab-adf8-f9c551c5966f" title="Permalink to this equation">¶</a></span>\[\begin{equation}
C_{di} = \frac{C_{dif} + \frac{S_r C_{dir}}{S_f}}{1 + \frac{S_r}{S_f}}
\end{equation}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">C_di</span> <span class="o">=</span> <span class="p">(</span><span class="n">C_dif</span> <span class="o">+</span> <span class="n">C_dir</span><span class="o">*</span><span class="p">(</span><span class="n">a_s</span><span class="p">)</span><span class="o">/</span><span class="n">a_w</span><span class="p">)</span><span class="o">/</span> \
            <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">a_s</span><span class="o">/</span><span class="n">a_w</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">C_di</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.03550986951278996] dimensionless
</pre></div>
</div>
</div>
</div>
<p>The induced drag coefficients are added to the section coefficient data for both the wing and stab. The flight velocity needs to be recalculated to account for these changes.</p>
<p>We now can calculate the total drag from the wing and stab:</p>
<div class="amsmath math notranslate nohighlight" id="equation-294bd654-01d3-45ea-96d4-07ad77a5a183">
<span class="eqno">(9.9)<a class="headerlink" href="#equation-294bd654-01d3-45ea-96d4-07ad77a5a183" title="Permalink to this equation">¶</a></span>\[\begin{equation}
D = \frac{1}{2}\rho u^2 ((C_{dw} + C_{diw})*S_w + (C_{ds} + C_{dis})*S_s)
\end{equation}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> \
    <span class="p">((</span><span class="n">clw</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span> <span class="o">+</span> <span class="n">C_dif</span><span class="p">)</span><span class="o">*</span><span class="n">a_w</span> <span class="o">+</span> <span class="p">(</span><span class="bp">cls</span><span class="p">(</span><span class="n">alpha</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">C_dir</span><span class="p">)</span><span class="o">*</span><span class="n">a_s</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.02176750710923581]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
</div>
<div class="section" id="including-downwash-effects">
<h2><span class="section-number">9.6. </span>Including Downwash Effects<a class="headerlink" href="#including-downwash-effects" title="Permalink to this headline">¶</a></h2>
<p>We will repeat the moment survey adding in induced drag effects. Only the drag calculations will change.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">drag_wing</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="p">(</span><span class="n">cd_w</span> <span class="o">+</span> <span class="n">C_dif</span><span class="p">)</span><span class="o">*</span> <span class="n">sw</span>
<span class="n">drag_stab</span> <span class="o">=</span> <span class="n">q</span> <span class="o">*</span> <span class="p">(</span><span class="n">cd_s</span> <span class="o">+</span> <span class="n">C_dir</span><span class="p">)</span> <span class="o">*</span><span class="n">ss</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wing_drag_moment</span> <span class="o">=</span> <span class="n">wda</span> <span class="o">*</span> <span class="n">drag_wing</span>
<span class="n">stab_drag_moment</span> <span class="o">=</span> <span class="n">sda</span> <span class="o">*</span> <span class="n">drag_stab</span>
<span class="n">stab_drag_moment</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.009497142816798861 -3.7776210894044983e-06 -0.0003115051310581758<br> -0.0004292168721333614 -0.0005077741489438436 -0.0005713142676534107<br> -0.0006265588110073705 -0.0006743495187192189 -0.0007156786598797161<br> -0.0007534438589404028 -0.0007895743972703252 -0.0008265359740475731<br> -0.0008586723425729976 -0.0008973917825963084 -0.0009560414392426693<br> -0.001035400149834148 -0.001144940390282463 -0.0012545100054445315<br> -0.001352089424992176 -0.00149244819445895 -0.00167301325655762<br> -0.0018580695655187381 -0.0020435552929400844 -0.002213912111832566<br> -0.002375587814910994 -0.0025432215819926403 -0.0027074914043712446<br> -0.002870617230368769 -0.003032256211701324 -0.0031928333411833125<br> -0.003352567033645174 -0.0035117134348771582 -0.0036704796492595068<br> -0.0038291114435196013 -0.0039877992912075435 -0.004146670399495484<br> -0.004305870966287587 -0.004465535207517089 -0.004625774198310909<br> -0.0047867332154853115 -0.004948572455473201 -0.0051114248899130224<br> -0.00527545091911101]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>inch kilogram meter/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_moment2</span> <span class="o">=</span> <span class="o">-</span> <span class="n">wing_lift_moment</span> \
    <span class="o">+</span> <span class="n">wing_drag_moment</span> \
    <span class="o">-</span> <span class="n">stab_lift_moment</span> \
    <span class="o">-</span> <span class="n">stab_drag_moment</span> \
    <span class="o">+</span> <span class="n">moment_wing</span> <span class="o">+</span> <span class="n">moment_stab</span>
<span class="n">total_moment2</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.07987039209104344 0.00488283335888568 0.002277365634703586<br> 0.0013301547629971451 0.0008135232712151106 0.000496981551286228<br> 0.0003120634328800248 0.00018812397136486054 8.546877235488234e-05<br> -2.6653352363050395e-06 -7.858847281149724e-05 -0.0001466744316722264<br> -0.0002098719327298491 -0.00026736438226625204 -0.0003165124850801461<br> -0.0003551275567632755 -0.00038573216266932854 -0.00039836363270355957<br> -0.00039468135741292616 -0.000398742416783377 -0.000406657876284604<br> -0.00040717446489672875 -0.0004071411333237764 -0.0004088377314583267<br> -0.0004124654996100395 -0.00041626024152396256 -0.00041963316048473605<br> -0.0004227217264441976 -0.0004255369800053733 -0.00042810222860028375<br> -0.00043042354993537077 -0.0004325118482743456 -0.0004343553072856502<br> -0.00043595580725146383 -0.00043732135325758725 -0.00043844243361326393<br> -0.00043931843731715266 -0.00043995842017158134 -0.0004403687023108776<br> -0.00044055718174449673 -0.00044054795434226966 -0.0004403611614904342<br> -0.00044001685620971684]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter<sup>2</sup>/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">total_moment2</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/09-level-flight-calculations_67_0.png" src="../_images/09-level-flight-calculations_67_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m_a2</span> <span class="o">=</span> <span class="n">fit_curve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">total_moment2</span><span class="p">)</span>
<span class="n">zero_angle</span>  <span class="o">=</span> <span class="n">m_a2</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">alpha2</span> <span class="o">=</span> <span class="n">zero_angle</span>
<span class="n">alpha2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/rblack/_dev/indoor-research/live-2022/.direnv/python-3.10.8/lib/python3.10/site-packages/scipy/interpolate/_cubic.py:23: UnitStrippedWarning: The unit of the quantity is stripped when downcasting to ndarray.
  x, y = map(np.asarray, (x, y))
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([3.8208469])
</pre></div>
</div>
</div>
</div>
<p>Now we calculate the new level velocity:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">VE_2</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">wgt</span> <span class="o">/</span><span class="p">(</span><span class="n">rho</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">gravity</span><span class="o">*</span><span class="p">(</span><span class="n">clw</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sw</span> <span class="o">+</span> <span class="bp">cls</span><span class="p">(</span><span class="n">alpha2</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">ss</span><span class="p">))</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">VE_2</span><span class="p">)</span>
<span class="n">v</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;mph&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[3.530971196188258]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>mile_per_hour</td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_drag</span> <span class="o">=</span> <span class="n">drag_wing</span> <span class="o">+</span> <span class="n">drag_stab</span>
<span class="n">total_drag</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.3929500888716565 0.025257729566370894 0.013088473540318338<br> 0.009126756727609823 0.0072481552331785755 0.006146728638353609<br> 0.0054222720065607456 0.004895457763050244 0.004485886235036091<br> 0.004164393915126265 0.003913349871453239 0.0037209917802242557<br> 0.0035712139495546174 0.0034732478392937795 0.0034364574474519414<br> 0.0034557174360533302 0.0035304523733325627 0.003634272340446225<br> 0.0037529850092498478 0.0039045140604408316 0.004077216351820705<br> 0.004246699950679164 0.0044019335805369555 0.00453107036026149<br> 0.004639032596874928 0.004736801760642742 0.004821733473294975<br> 0.004896783522627622 0.004963432639501056 0.005023262977186561<br> 0.005077505604033039 0.005127167188872987 0.005173058392346326<br> 0.0052158964548361724 0.005256256371758824 0.005294599020939445<br> 0.0053312892053570884 0.0053666473181803375 0.005401001335835193<br> 0.005434661004865281 0.005467902391388349 0.005500976670493731<br> 0.005534124997754408]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tg</span> <span class="o">=</span> <span class="n">total_drag</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
<span class="n">tg</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.3929500888716565 0.025257729566370894 0.013088473540318338<br> 0.009126756727609823 0.0072481552331785755 0.006146728638353609<br> 0.0054222720065607456 0.004895457763050244 0.004485886235036091<br> 0.004164393915126265 0.003913349871453239 0.0037209917802242557<br> 0.0035712139495546174 0.0034732478392937795 0.0034364574474519414<br> 0.0034557174360533302 0.0035304523733325627 0.003634272340446225<br> 0.0037529850092498478 0.0039045140604408316 0.004077216351820705<br> 0.004246699950679164 0.0044019335805369555 0.00453107036026149<br> 0.004639032596874928 0.004736801760642742 0.004821733473294975<br> 0.004896783522627622 0.004963432639501056 0.005023262977186561<br> 0.005077505604033039 0.005127167188872987 0.005173058392346326<br> 0.0052158964548361724 0.005256256371758824 0.005294599020939445<br> 0.0053312892053570884 0.0053666473181803375 0.005401001335835193<br> 0.005434661004865281 0.005467902391388349 0.005500976670493731<br> 0.005534124997754408]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_curve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">tg</span><span class="p">,</span><span class="s2">&quot;Total Drag&quot;</span><span class="p">,</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span><span class="s2">&quot;Drag&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/rblack/_dev/indoor-research/live-2022/.direnv/python-3.10.8/lib/python3.10/site-packages/matplotlib/cbook/__init__.py:1298: UnitStrippedWarning: The unit of the quantity is stripped when downcasting to ndarray.
  return np.asarray(x, float)
</pre></div>
</div>
<img alt="../_images/09-level-flight-calculations_73_1.png" src="../_images/09-level-flight-calculations_73_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tgf</span> <span class="o">=</span> <span class="n">fit_curve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">tg</span><span class="p">)</span>
<span class="n">level_drag</span> <span class="o">=</span> <span class="n">tgf</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span>
<span class="n">level_drag</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">kilogram</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">meter</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">second</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/rblack/_dev/indoor-research/live-2022/.direnv/python-3.10.8/lib/python3.10/site-packages/scipy/interpolate/_cubic.py:23: UnitStrippedWarning: The unit of the quantity is stripped when downcasting to ndarray.
  x, y = map(np.asarray, (x, y))
</pre></div>
</div>
<div class="output text_html"><table><tbody><tr><th>Magnitude</th><td style='text-align:left;'><pre>[0.004173732398264102]</pre></td></tr><tr><th>Units</th><td style='text-align:left;'>kilogram meter/second<sup>2</sup></td></tr></tbody></table></div></div>
</div>
<p>We will need this number when analyzing the propeller for the model.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="08-generating-airfoils-for-xfoil.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">8. </span>Generating Airfoils for XFoil</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="10-a6-propeller-analysis.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">10. </span>A-6 Propeller Analysis</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Roie R. Black<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>